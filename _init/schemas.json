{
  "alerts": {
    "fields": {
      "id": {
        "type": "text"
      },
      "title": {
        "type": "text"
      },
      "content": {
        "type": "text"
      },
      "isRead": {
        "type": "boolean",
        "default": false
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {},
      "unique": [],
      "required": ["title", "content"]
    }
  },
  "billing_configs": {
    "fields": {
      "id": {
        "type": "text"
      },
      "description": {
        "type": "text"
      },
      "effectiveStart": {
        "type": "datetime"
      },
      "effectiveEnd": {
        "type": "datetime"
      },
      "rateType": {
        "type": "enum",
        "default": "duration",
        "enums": {
          "duration": "Duration",
          "count": "Count",
          "fixed": "Fixed"
        }
      },
      "unit": {
        "type": "enum",
        "default": "hour",
        "enums": {
          "hour": "Hour",
          "minute": "Minute"
        }
      },
      "unitCost": {
        "type": "number"
      },
      "includeTags": {
        "type": "array",
        "default": []
      },
      "excludeTags": {
        "type": "array",
        "default": []
      },
      "contactId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "includeTags": {
          "reference": "tags",
          "primary": "id"
        },
        "excludeTags": {
          "reference": "tags",
          "primary": "id"
        },
        "contactId": {
          "reference": "contacts",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "description",
        "effectiveStart",
        "rateType",
        "unit",
        "unitCost",
        "includeTags",
        "excludeTags",
        "contactId"
      ]
    },
    "indexes": {
      "filter": {
        "includeTags": {},
        "excludeTags": {},
        "contactId": {}
      }
    }
  },
  "chart_configs": {
    "fields": {
      "id": {
        "type": "text"
      },
      "description": {
        "type": "text"
      },
      "chartType": {
        "type": "enum",
        "default": "hbar",
        "enums": {
          "hbar": "Horizontal Bar",
          "vbar": "Vertical Bar"
        }
      },
      "dataSource": {
        "type": "enum",
        "enums": {
          "work_logs": "Work Logs",
          "transactions": "Transactions"
        }
      },
      "scaleUnit": {
        "type": "enum",
        "enums": {
          "hour": "Hour",
          "minute": "Minute",
          "second": "Second",
          "dollar": "Dollar"
        }
      },
      "scaleValue": {
        "type": "number"
      },
      "groupBy": {
        "type": "enum",
        "default": "category",
        "enums": {
          "category": "Category",
          "year": "Year",
          "month": "Month",
          "day": "Day"
        }
      },
      "includeTags": {
        "type": "array",
        "default": []
      },
      "excludeTags": {
        "type": "array",
        "default": []
      },
      "startDate": {
        "type": "date"
      },
      "endDate": {
        "type": "date"
      },
      "displayOrder": {
        "type": "number",
        "default": 1
      },
      "active": {
        "type": "boolean",
        "default": true
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "includeTags": {
          "reference": "tags",
          "primary": "id"
        },
        "excludeTags": {
          "reference": "tags",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "description",
        "chartType",
        "dataSource",
        "scaleUnit",
        "scaleValue",
        "groupBy",
        "includeTags",
        "excludeTags",
        "startDate",
        "endDate",
        "displayOrder"
      ]
    },
    "indexes": {
      "filter": {
        "description": { "match": true },
        "active": {},
        "includeTags": {},
        "excludeTags": {}
      }
    }
  },
  "contacts": {
    "fields": {
      "id": {
        "type": "text"
      },
      "name": {
        "type": "text"
      },
      "accountNumber": {
        "type": "text"
      },
      "addressLine1": {
        "type": "text"
      },
      "addressLine2": {
        "type": "text"
      },
      "addressLine3": {
        "type": "text"
      },
      "city": {
        "type": "text"
      },
      "state": {
        "type": "text"
      },
      "country": {
        "type": "text"
      },
      "postcode": {
        "type": "text"
      },
      "contactNumber1": {
        "type": "text"
      },
      "contactNumber2": {
        "type": "text"
      },
      "contactNumber3": {
        "type": "text"
      },
      "contactPerson1": {
        "type": "text"
      },
      "contactPerson2": {
        "type": "text"
      },
      "contactPerson3": {
        "type": "text"
      },
      "contactEmail1": {
        "type": "text"
      },
      "contactEmail2": {
        "type": "text"
      },
      "contactEmail3": {
        "type": "text"
      },
      "url1": {
        "type": "text"
      },
      "url2": {
        "type": "text"
      },
      "url3": {
        "type": "text"
      },
      "logo": {
        "type": "file"
      },
      "customFields": {
        "type": "object"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "country": {
          "reference": "countries",
          "primary": "alpha3Code"
        },
        "logo": {
          "reference": "documents",
          "primary": "id"
        }
      },
      "unique": [],
      "required": ["name"]
    },
    "indexes": {
      "filter": {
        "name": { "match": true }
      }
    }
  },
  "countries": {
    "fields": {
      "alpha3Code": {
        "type": "text"
      },
      "countryName": {
        "type": "text"
      }
    },
    "constraints": {
      "primary": ["alpha3Code"],
      "foreign": {},
      "unique": [],
      "required": []
    }
  },
  "currencies": {
    "fields": {
      "id": {
        "type": "text"
      },
      "code": {
        "type": "text"
      },
      "symbol": {
        "type": "text"
      },
      "exchangeRate": {
        "type": "number"
      },
      "effectiveStart": {
        "type": "date"
      },
      "effectiveEnd": {
        "type": "date"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {},
      "unique": ["code|symbol|effectiveStart"],
      "required": ["code", "symbol", "exchangeRate", "effectiveStart"]
    },
    "indexes": {
      "filter": {
        "code": { "match": true }
      }
    }
  },
  "documents": {
    "fields": {
      "id": {
        "type": "text"
      },
      "filename": {
        "type": "text"
      },
      "mimeType": {
        "type": "text"
      },
      "filePath": {
        "type": "text"
      },
      "tags": {
        "type": "array",
        "default": []
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {},
      "unique": [],
      "required": ["filename", "mimeType", "filePath"]
    },
    "indexes": {
      "filter": {
        "filename": { "match": true },
        "tags": {}
      }
    }
  },
  "invoices": {
    "fields": {
      "id": {
        "type": "text"
      },
      "invoiceNumber": {
        "type": "text"
      },
      "invoiceDate": {
        "type": "date"
      },
      "dueDate": {
        "type": "date"
      },
      "totalAmount": {
        "type": "number"
      },
      "customFields": {
        "type": "object",
        "default": {}
      },
      "voided": {
        "type": "boolean",
        "default": false
      },
      "invoiceConfigId": {
        "type": "text"
      },
      "currencyId": {
        "type": "text"
      },
      "contactId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "invoiceConfigId": {
          "reference": "invoice_configs",
          "primary": "id"
        },
        "currencyId": {
          "reference": "currencies",
          "primary": "id"
        },
        "contactId": {
          "reference": "contacts",
          "primary": "id"
        }
      },
      "unique": ["invoiceNumber"],
      "required": [
        "invoiceNumber",
        "invoiceDate",
        "dueDate",
        "totalAmount",
        "invoiceConfigId",
        "currencyId",
        "contactId"
      ]
    },
    "indexes": {
      "filter": {
        "invoiceNumber": { "match": true },
        "contactId": {}
      }
    }
  },
  "invoice_configs": {
    "fields": {
      "id": {
        "type": "text"
      },
      "description": {
        "type": "text"
      },
      "invoiceCycleDurationValue": {
        "type": "number",
        "default": 1
      },
      "invoiceCycleDurationUnit": {
        "type": "enum",
        "default": "month",
        "enums": {
          "month": "Month",
          "week": "Week",
          "day": "Day"
        }
      },
      "dueDateCycleValue": {
        "type": "number",
        "default": 30
      },
      "dueDateCycleUnit": {
        "type": "enum",
        "default": "day",
        "enums": {
          "month": "Month",
          "week": "Week",
          "day": "Day"
        }
      },
      "paymentTerms": {
        "type": "text"
      },
      "tags": {
        "type": "array",
        "default": []
      },
      "customFields": {
        "type": "object",
        "default": {}
      },
      "invoiceNumberSequenceId": {
        "type": "text"
      },
      "billingContactId": {
        "type": "text"
      },
      "invoiceTemplateId": {
        "type": "text"
      },
      "currencyId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "tags": {
          "reference": "tags",
          "primary": "id"
        },
        "invoiceNumberSequenceId": {
          "reference": "sequences",
          "primary": "id"
        },
        "billingContactId": {
          "reference": "contacts",
          "primary": "id"
        },
        "invoiceTemplateId": {
          "reference": "invoice_templates",
          "primary": "id"
        },
        "currencyId": {
          "reference": "currencies",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "description",
        "invoiceCycleDurationValue",
        "invoiceCycleDurationUnit",
        "dueDateCycleValue",
        "dueDateCycleUnit",
        "tags",
        "customFields",
        "invoiceNumberSequenceId",
        "billingContactId",
        "invoiceTemplateId",
        "currencyId"
      ]
    },
    "indexes": {
      "filter": {
        "description": { "match": true },
        "tags": {},
        "invoiceNumberSequenceId": {},
        "billingContactId": {},
        "invoiceTemplateId": {}
      }
    }
  },
  "invoice_lines": {
    "fields": {
      "id": {
        "type": "text"
      },
      "description": {
        "type": "text"
      },
      "unit": {
        "type": "enum",
        "default": "hour",
        "enums": {
          "hour": "Hour",
          "minute": "Minute",
          "count": "Count",
          "fixed": "Fixed"
        }
      },
      "unitCost": {
        "type": "number",
        "default": 0
      },
      "unitValue": {
        "type": "number",
        "default": 0
      },
      "subtotal": {
        "type": "number",
        "default": 0
      },
      "invoiceId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "invoiceId": {
          "reference": "invoices",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "description",
        "unit",
        "unitCost",
        "unitValue",
        "subtotal",
        "invoiceId"
      ]
    },
    "indexes": {
      "filter": {
        "description": { "match": true },
        "invoiceId": {}
      }
    }
  },
  "invoice_templates": {
    "fields": {
      "id": {
        "type": "text"
      },
      "name": {
        "type": "text"
      },
      "contentMarkup": {
        "type": "text"
      },
      "contentStyles": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {},
      "unique": [],
      "required": [
        "name",
        "contentMarkup",
        "contentStyles"
      ]
    },
    "indexes": {
      "filter": {
        "name": { "match": true }
      }
    }
  },
  "income_receipts": {
    "fields": {
      "id": {
        "type": "text"
      },
      "receiptNumber": {
        "type": "text"
      },
      "receiptDate": {
        "type": "date"
      },
      "billableAmount": {
        "type": "number"
      },
      "paidAmount": {
        "type": "number"
      },
      "paymentAmount": {
        "type": "number"
      },
      "remainingAmount": {
        "type": "number"
      },
      "customFields": {
        "type": "object",
        "default": {}
      },
      "voided": {
        "type": "boolean",
        "default": false
      },
      "incomeReceiptConfigId": {
        "type": "text"
      },
      "invoiceId": {
        "type": "text"
      },
      "currencyId": {
        "type": "text"
      },
      "incomeTransactionId": {
        "type": "text"
      },
      "contactId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "incomeReceiptConfigId": {
          "reference": "receipt_configs",
          "primary": "id"
        },
        "invoiceId": {
          "reference": "invoices",
          "primary": "id"
        },
        "currencyId": {
          "reference": "currencies",
          "primary": "id"
        },
        "incomeTransactionId": {
          "reference": "transactions",
          "primary": "id"
        },
        "contactId": {
          "reference": "contacts",
          "primary": "id"
        }
      },
      "unique": ["receiptNumber"],
      "required": [
        "receiptNumber",
        "receiptDate",
        "billableAmount",
        "paidAmount",
        "paymentAmount",
        "remainingAmount",
        "customFields",
        "voided",
        "currencyId",
        "incomeTransactionId",
        "contactId"
      ]
    },
    "indexes": {
      "filter": {
        "receiptNumber": { "match": true },
        "invoiceId": {},
        "contactId": {}
      }
    }
  },
  "receipt_configs": {
    "fields": {
      "id": {
        "type": "text"
      },
      "description": {
        "type": "text"
      },
      "customFields": {
        "type": "object",
        "default": {}
      },
      "receiptNumberSequenceId": {
        "type": "text"
      },
      "billingContactId": {
        "type": "text"
      },
      "receiptTemplateId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "receiptNumberSequenceId": {
          "reference": "sequences",
          "primary": "id"
        },
        "billingContactId": {
          "reference": "contacts",
          "primary": "id"
        },
        "receiptTemplateId": {
          "reference": "receipt_templates",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "description",
        "customFields",
        "receiptNumberSequenceId",
        "billingContactId",
        "receiptTemplateId"
      ]
    },
    "indexes": {
      "filter": {
        "description": { "match": true },
        "receiptNumberSequenceId": {},
        "billingContactId": {},
        "receiptTemplateId": {}
      }
    }
  },
  "receipt_templates": {
    "fields": {
      "id": {
        "type": "text"
      },
      "name": {
        "type": "text"
      },
      "contentMarkup": {
        "type": "text"
      },
      "contentStyles": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {},
      "unique": [],
      "required": [
        "name",
        "contentMarkup",
        "contentStyles"
      ]
    },
    "indexes": {
      "filter": {
        "name": { "match": true }
      }
    }
  },
  "sequences": {
    "fields": {
      "id": {
        "type": "text"
      },
      "name": {
        "type": "text"
      },
      "startingNumber": {
        "type": "number",
        "default": 0
      },
      "lastUsedNumber": {
        "type": "number",
        "default": 0
      },
      "incrementStep": {
        "type": "number",
        "default": 1
      },
      "prefix": {
        "type": "text"
      },
      "suffix": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {},
      "unique": [],
      "required": ["name", "startingNumber", "lastUsedNumber", "incrementStep"]
    },
    "indexes": {
      "filter": {
        "name": { "match": true },
        "prefix": { "match": true },
        "suffix": { "match": true }
      }
    }
  },
  "system_configs": {
    "fields": {
      "id": {
        "type": "text"
      },
      "effectiveStart": {
        "type": "date"
      },
      "effectiveEnd": {
        "type": "date"
      },
      "tagFormat": {
        "type": "text",
        "default": "{{ category }}:{{ name }}"
      },
      "timezone": {
        "type": "text",
        "default": "UTC"
      },
      "baseCurrencyId": {
        "type": "text"
      },
      "baseContactId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "baseCurrencyId": {
          "reference": "currencies",
          "primary": "id"
        },
        "baseContactId": {
          "reference": "contacts",
          "primary": "id"
        }
      },
      "unique": ["effectiveStart|effectiveEnd"],
      "required": ["effectiveStart", "baseCurrencyId", "baseContactId"]
    },
    "indexes": {
      "filter": {
        "baseCurrencyId": {},
        "baseContactId": {}
      }
    }
  },
  "tags": {
    "fields": {
      "id": {
        "type": "text"
      },
      "category": {
        "type": "text"
      },
      "name": {
        "type": "text"
      },
      "description": {
        "type": "text"
      },
      "textColor": {
        "type": "text"
      },
      "backgroundColor": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {},
      "unique": ["category|name"],
      "required": ["category", "name"]
    },
    "indexes": {
      "filter": {
        "category": { "match": true }
      }
    }
  },
  "tax_deductibles": {
    "fields": {
      "id": {
        "type": "text"
      },
      "category": {
        "type": "text"
      },
      "description": {
        "type": "text"
      },
      "rateType": {
        "type": "enum",
        "default": "fixed",
        "enums": {
          "percentage": "Percentage",
          "fixed": "Fixed"
        }
      },
      "rate": {
        "type": "number"
      },
      "maxDeductibleAmount": {
        "type": "number"
      },
      "transactionTypes": {
        "type": "array",
        "default": []
      },
      "includeTags": {
        "type": "array",
        "default": []
      },
      "excludeTags": {
        "type": "array",
        "default": []
      },
      "taxTableId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "includeTags": {
          "reference": "tags",
          "primary": "id"
        },
        "excludeTags": {
          "reference": "tags",
          "primary": "id"
        },
        "taxTableId": {
          "reference": "tax_tables",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "category",
        "description",
        "rateType",
        "rate",
        "transactionTypes",
        "includeTags",
        "excludeTags",
        "taxTableId"
      ]
    },
    "indexes": {
      "filter": {
        "includeTags": {},
        "excludeTags": {},
        "taxTableId": {}
      }
    }
  },
  "tax_tables": {
    "fields": {
      "id": {
        "type": "text"
      },
      "description": {
        "type": "text"
      },
      "effectiveStart": {
        "type": "date"
      },
      "effectiveEnd": {
        "type": "date"
      },
      "includeTags": {
        "type": "array",
        "default": []
      },
      "excludeTags": {
        "type": "array",
        "default": []
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "includeTags": {
          "reference": "tags",
          "primary": "id"
        },
        "excludeTags": {
          "reference": "tags",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "description",
        "effectiveStart"
      ]
    },
    "indexes": {
      "filter": {
        "description": { "match": true },
        "includeTags": {},
        "excludeTags": {}
      }
    }
  },
  "tax_tiers": {
    "fields": {
      "id": {
        "type": "text"
      },
      "minIncome": {
        "type": "number"
      },
      "maxIncome": {
        "type": "number"
      },
      "maxPayableAmount": {
        "type": "number"
      },
      "rate": {
        "type": "number"
      },
      "taxTableId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "taxTableId": {
          "reference": "tax_tables",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "minIncome",
        "maxIncome",
        "maxPayableAmount",
        "rate",
        "taxTableId"
      ]
    },
    "indexes": {
      "filter": {
        "taxTableId": {}
      }
    }
  },
  "transactions": {
    "fields": {
      "id": {
        "type": "text"
      },
      "type": {
        "type": "enum",
        "enums": {
          "income": "Income",
          "expense": "Expense",
          "incomeReversal": "Income Reversal",
          "expenseReversal": "Expense Reversal"
        }
      },
      "transactionDate": {
        "type": "date"
      },
      "description": {
        "type": "text"
      },
      "amount": {
        "type": "number"
      },
      "homeCurrencyAmount": {
        "type": "number"
      },
      "tags": {
        "type": "array",
        "default": []
      },
      "currencyId": {
        "type": "text"
      },
      "associatedTransactionId": {
        "type": "text"
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign":{
        "tags": {
          "reference": "tags",
          "primary": "id"
        },
        "currencyId": {
          "reference": "currencies",
          "primary": "id"
        },
        "associatedTransactionId": {
          "reference": "transactions",
          "primary": "id"
        }
      },
      "unique": [],
      "required": [
        "type",
        "transactionDate",
        "description",
        "amount",
        "homeCurrencyAmount",
        "tags",
        "currencyId"
      ]
    },
    "indexes": {
      "filter": {
        "type": {},
        "currencyId": {}
      }
    }
  },
  "work_logs": {
    "fields": {
      "id": {
        "type": "text"
      },
      "startTime": {
        "type": "datetime"
      },
      "endTime": {
        "type": "datetime"
      },
      "description": {
        "type": "text"
      },
      "content": {
        "type": "text"
      },
      "tags": {
        "type": "array",
        "default": []
      },
      "createdAt": {
        "type": "datetime"
      },
      "updatedAt": {
        "type": "datetime"
      }
    },
    "constraints": {
      "primary": ["id"],
      "foreign": {
        "tags": {
          "reference": "tags",
          "primary": "id"
        }
      },
      "unique": [],
      "required": []
    },
    "indexes": {
      "filter": {
        "tags": {}
      }
    }
  }
}
